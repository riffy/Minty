<Window
	xmlns="https://github.com/avaloniaui"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:vm="using:Minty.Windows.Main.ViewModels"
	xmlns:models="using:Minty.Windows.Main.Models"
	xmlns:fluent="clr-namespace:FluentAvalonia.UI.Controls;assembly=FluentAvalonia"
	mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
	x:Class="Minty.Windows.Main.Views.MainWindow"
	x:DataType="vm:MainWindowViewModel"
	Icon="/Assets/avalonia-logo.ico"
	Title="Minty">
	<Grid RowDefinitions="*,Auto">
        <fluent:NavigationView
            Grid.Row="0"
            Margin="0,0,10,5"
            MenuItemsSource="{Binding NavigationCategories}"
            x:Name="NavigationPanel"
            SelectionChanged="NavigationPanel_OnSelectionChanged">
	        <fluent:NavigationView.Content>
		        <Grid>
			        <!-- Background Image Layer
			        <Image Source="avares://Minty/Assets/Images/mintv_trans.png"
			               Opacity="0.2"
			               HorizontalAlignment="Center"
			               VerticalAlignment="Center"
			               Stretch="Uniform"/>
					-->
			        <!-- Content Layer -->
			        <ContentControl Content="{Binding CurrentPage}" />
		        </Grid>
	        </fluent:NavigationView.Content>
	        <fluent:NavigationView.MenuItemTemplateSelector>
                <models:NavigationItemTemplateSelector>
                    <DataTemplate DataType="{x:Type models:NavigationCategory}">
                        <fluent:NavigationViewItem Content="{Binding Name}" IconSource="{Binding Icon}" />
                    </DataTemplate>
                    <models:NavigationItemTemplateSelector.ItemTemplateWithChildren>
	                    <!-- TODO: Category with children -->
	                    <!--
	                    <DataTemplate DataType="{x:Type m:CategoryWithChildren}">
                            <fluent:NavigationViewItem
                                Content="{Binding Name}"
                                IconSource="{Binding Icon}"
                                MenuItemsSource="{Binding Children}"
                                SelectsOnInvoked="False" />
                        </DataTemplate>
                        -->
                    </models:NavigationItemTemplateSelector.ItemTemplateWithChildren>
                    <models:NavigationItemTemplateSelector.SeparatorTemplate>
                        <DataTemplate DataType="{x:Type models:NavigationSeperator}">
                            <fluent:NavigationViewItemSeparator />
                        </DataTemplate>
                    </models:NavigationItemTemplateSelector.SeparatorTemplate>
                </models:NavigationItemTemplateSelector>
            </fluent:NavigationView.MenuItemTemplateSelector>
        </fluent:NavigationView>
    </Grid>
</Window>
